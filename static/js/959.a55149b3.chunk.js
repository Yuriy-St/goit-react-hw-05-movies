"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[959],{8467:function(n,r,e){e.d(r,{Hx:function(){return h},Mc:function(){return d},wr:function(){return f},xc:function(){return v},z1:function(){return m}});var t=e(8683),a=e(5861),i=e(4687),u=e.n(i),o=e(1243),c="https://api.themoviedb.org/3",s={language:"en-US"},l={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4YzIyMmVkMDdhYmIxYzBhZTdkZTZmNjcwNzc1MWYxMCIsInN1YiI6IjY0ZWM5NjI2NDU4MTk5MDBjNmY5N2ZmMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BJKeXT5Tv6NruFgOPeeGmw_mnuiGKgPxsTR813jGw0o"}},f=function(){var n="".concat(c,"/trending/movie/day");return p({url:n})},d=function(n){var r="".concat(c,"/movie/").concat(n);return p({url:r})},v=function(n){var r="".concat(c,"/movie/").concat(n,"/credits");return p({url:r})},h=function(n){var r="".concat(c,"/movie/").concat(n,"/reviews");return p({url:r})},m=function(n){var r="".concat(c,"/search/movie");return p({url:r,params:{query:n,include_adult:"false",language:"en-US",page:"1"}})},p=function(){var n=(0,a.Z)(u().mark((function n(r){var e,a,i,c,f,d,v;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.url,a=r.params,i=void 0===a?{}:a,c=new AbortController,f=(0,t.Z)((0,t.Z)({},l),{},{url:e,params:(0,t.Z)((0,t.Z)({},s),i),signal:c.signal}),n.prev=3,n.next=6,(0,o.Z)(f);case 6:if(200===(d=n.sent).status){n.next=9;break}throw d.data;case 9:return n.abrupt("return",{data:d.data,controller:c});case 12:throw n.prev=12,n.t0=n.catch(3),null!==(v=n.t0.response)&&void 0!==v&&v.data?console.error(v.data):console.error(v||n.t0),new Error("Something went wrong. Try reload the page.");case 17:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(r){return n.apply(this,arguments)}}()},1454:function(n,r,e){e.d(r,{Z:function(){return c}});var t,a=e(4727),i=e(168),u=e(5397).Z.div(t||(t=(0,i.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),o=e(184);function c(){return(0,o.jsx)(u,{children:(0,o.jsx)(a.Nx,{})})}},3961:function(n,r,e){e.d(r,{Z:function(){return l}});var t,a=e(7689),i=e(1087),u=e(168),o=e(5397).Z.ul(t||(t=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),c=e(6249),s=e(184);function l(n){var r=n.movies,e=(0,a.TH)(),t="/movies"!==e.pathname?"".concat(c.Z.MOVIES,"/"):"";return(0,s.jsx)(o,{children:r.map((function(n){var r=n.id,a=n.title;return(0,s.jsx)("li",{children:(0,s.jsx)(i.rU,{to:"".concat(t).concat(r),state:{from:e},children:a})},r)}))})}},5959:function(n,r,e){e.r(r),e.d(r,{default:function(){return y}});var t,a,i,u=e(1454),o=e(3961),c=e(9439),s=e(2791),l=e(168),f=e(5397),d=f.Z.form(t||(t=(0,l.Z)(["\n  display: flex;\n  gap: 0.25rem;\n"]))),v=f.Z.input(a||(a=(0,l.Z)([""]))),h=f.Z.button(i||(i=(0,l.Z)([""]))),m=e(184);function p(n){var r=n.onSubmit,e=(0,s.useState)(""),t=(0,c.Z)(e,2),a=t[0],i=t[1];return(0,m.jsxs)(d,{onSubmit:function(n){n.preventDefault(),r(a)},children:[(0,m.jsx)(v,{type:"text",value:a,onChange:function(n){var r=n.target;i(r.value)}}),(0,m.jsx)(h,{type:"submit",children:"Search"})]})}var Z=e(5861),x=e(4687),g=e.n(x),j=e(8467),w=e(1087),b=e(4588);function y(){var n=function(){var n=(0,w.lr)(),r=(0,c.Z)(n,2),e=r[0],t=r[1],a=(0,s.useState)([]),i=(0,c.Z)(a,2),u=i[0],o=i[1],l=(0,s.useState)(!1),f=(0,c.Z)(l,2),d=f[0],v=f[1],h=(0,s.useState)(!1),m=(0,c.Z)(h,2),p=m[0],x=m[1];return(0,s.useEffect)((function(){var n=e.get("query");if(n){var r=function(){var r=(0,Z.Z)(g().mark((function r(){var e,t,a;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,v(!0),r.next=4,(0,j.z1)(n);case 4:return e=r.sent,t=e.data,a=e.controller,o(t.results),r.abrupt("return",a);case 11:r.prev=11,r.t0=r.catch(0),x(r.t0.message);case 14:return r.prev=14,v(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(){return r.apply(this,arguments)}}(),t=r();return function(){null!==t&&void 0!==t||t.abort()}}}),[e]),{movies:u,isLoading:d,fetchError:p,onHandleSubmit:function(n){t({query:n})}}}(),r=n.movies,e=n.isLoading,t=n.fetchError,a=n.onHandleSubmit,i=(null===r||void 0===r?void 0:r.length)>0,l=!e&&!i&&!t;return(0,m.jsx)(b.W,{children:(0,m.jsxs)(s.Suspense,{fallback:(0,m.jsx)("div",{children:"Loading..."}),children:[(0,m.jsx)(p,{onSubmit:a}),e&&(0,m.jsx)(u.Z,{}),t&&(0,m.jsx)("p",{children:t}),i&&(0,m.jsx)(o.Z,{movies:r}),l&&(0,m.jsx)("p",{children:"Nothing found \ud83d\ude15"})]})})}},4588:function(n,r,e){e.d(r,{W:function(){return i}});var t,a=e(168),i=e(5397).Z.div(t||(t=(0,a.Z)(["\n  label: container;\n  width: 78.5rem;\n  margin: 0 auto;\n  padding-right: 1rem;\n  padding-left: 1rem;\n"])))}}]);
//# sourceMappingURL=959.a55149b3.chunk.js.map