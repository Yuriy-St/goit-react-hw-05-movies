{"version":3,"file":"static/js/591.26625960.chunk.js","mappings":"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","sources":["api/themoviedb.js","components/Loader/Loader.styled.jsx","components/Loader/Loader.jsx","components/Reviews/Reviews.styled.jsx","components/Reviews/Reviews.jsx","hooks/useFetchMovieReveiws.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nconst DEF_PARAMS = {\n  language: 'en-US',\n};\n\nconst DEF_OPTIONS = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4YzIyMmVkMDdhYmIxYzBhZTdkZTZmNjcwNzc1MWYxMCIsInN1YiI6IjY0ZWM5NjI2NDU4MTk5MDBjNmY5N2ZmMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BJKeXT5Tv6NruFgOPeeGmw_mnuiGKgPxsTR813jGw0o',\n  },\n};\n\nexport const fetchTrendingMovies = () => {\n  const url = `${BASE_URL}/trending/movie/day`;\n  return tmdbProcessQuery({ url });\n};\n\nexport const fetchMovieById = id => {\n  const url = `${BASE_URL}/movie/${id}`;\n  return tmdbProcessQuery({ url });\n};\n\nexport const fetchMovieCredits = id => {\n  const url = `${BASE_URL}/movie/${id}/credits`;\n  return tmdbProcessQuery({ url });\n};\n\nexport const fetchMovieReviews = id => {\n  const url = `${BASE_URL}/movie/${id}/reviews`;\n  return tmdbProcessQuery({ url });\n};\n\nexport const searchMovies = query => {\n  const url = `${BASE_URL}/search/movie`;\n  const params = {\n    query,\n    include_adult: 'false',\n    language: 'en-US',\n    page: '1',\n  };\n  return tmdbProcessQuery({ url, params });\n};\n\nconst tmdbProcessQuery = async ({ url, params = {} }) => {\n  const controller = new AbortController();\n\n  const options = {\n    ...DEF_OPTIONS,\n    url,\n    params: { ...DEF_PARAMS, ...params },\n    signal: controller.signal,\n  };\n\n  try {\n    const response = await axios(options);\n    if (response.status !== 200) throw response.data;\n    return { data: response.data, controller };\n  } catch (err) {\n    const { response } = err;\n\n    if (response?.data) {\n      console.error(response.data);\n    } else {\n      console.error(response || err);\n    }\n\n    throw new Error('Something went wrong. Try reload the page.');\n  }\n};\n","import styled from '@emotion/styled';\n\nexport const LoaderContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n","import { InfinitySpin } from 'react-loader-spinner';\nimport { LoaderContainer } from './Loader.styled';\n\nexport default function Loader() {\n  return (\n    <LoaderContainer>\n      <InfinitySpin />\n    </LoaderContainer>\n  );\n}\n","import styled from '@emotion/styled';\n\nexport const ReviewsContainer = styled.ul`\n  display: flex;\n  flex-direction: column;\n  row-gap: 2rem;\n  padding-bottom: 1rem;\n`;\n\nexport const ReviewItem = styled.li`\n  display: flex;\n  flex-direction: column;\n  row-gap: 0.5rem;\n`;\n\nexport const Author = styled.p`\n  & .tag {\n    font-weight: 700;\n  }\n`;\n\nexport const Content = styled.div`\n  & p {\n    margin-bottom: 0.25rem;\n    display: -webkit-box;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n  }\n`;\n","import Loader from 'components/Loader/Loader';\nimport { useFetchMovieReviews } from 'hooks/useFetchMovieReveiws';\nimport {\n  Author,\n  Content,\n  ReviewItem,\n  ReviewsContainer,\n} from './Reviews.styled';\nimport { Suspense } from 'react';\n\nexport default function Reviews() {\n  const { response, isLoading, fetchError } = useFetchMovieReviews();\n  const results = response?.results;\n\n  const hasResults = results?.length > 0;\n  const noResults = !isLoading && !hasResults;\n\n  return (\n    // <div>Cast</div>\n    <>\n      {isLoading && <Loader />}\n      {hasResults && (\n        <Suspense fallback={<div>Loading...</div>}>\n          <ReviewsContainer>\n            {results.map(({ id, author, content, url }) => (\n              <ReviewItem key={id}>\n                <Author>\n                  <span className=\"tag\">Author:</span> {author}\n                </Author>\n                <Content>\n                  <p>{content}</p>\n                  <a href={url}>read full review</a>\n                </Content>\n              </ReviewItem>\n            ))}\n          </ReviewsContainer>\n        </Suspense>\n      )}\n      {noResults && <p>Sorry we can't find something ðŸ˜•</p>}\n      {fetchError && <p>{fetchError}</p>}\n    </>\n  );\n}\n","import { fetchMovieReviews } from 'api/themoviedb';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nexport const useFetchMovieReviews = () => {\n  const [response, setResponse] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [fetchError, setFetchError] = useState(false);\n  const { movieId } = useParams();\n\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        setIsLoading(true);\n        const { data, controller } = await fetchMovieReviews(movieId);\n        setResponse(data);\n        return controller;\n      } catch (error) {\n        setFetchError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    const abortController = fetchReviews();\n\n    return () => {\n      abortController ?? abortController.abort();\n    };\n  }, [movieId]);\n\n  return { response, isLoading, fetchError };\n};\n"],"names":["BASE_URL","DEF_PARAMS","language","DEF_OPTIONS","method","headers","accept","Authorization","fetchTrendingMovies","url","tmdbProcessQuery","fetchMovieById","id","fetchMovieCredits","fetchMovieReviews","searchMovies","query","params","include_adult","page","controller","AbortController","options","signal","axios","response","status","data","console","error","Error","LoaderContainer","styled","Loader","ReviewsContainer","ReviewItem","Author","Content","Reviews","useState","setResponse","isLoading","setIsLoading","fetchError","setFetchError","movieId","useParams","useEffect","fetchReviews","message","abortController","abort","useFetchMovieReviews","results","hasResults","length","noResults","Suspense","fallback","map","author","content","className","href"],"sourceRoot":""}